{"version":3,"sources":["../src/parts/MovementSensor/KXSC7-2050/index.ts"],"names":[],"mappings":";;;;;;;;;;;AAKA,MAAqB,UAAU;IAoB7B;QACE,IAAI,CAAC,IAAI,GAAG,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC;QAC1C,IAAI,CAAC,YAAY,GAAG,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC,CAAC;IACtC,CAAC;IArBM,MAAM,CAAC,IAAI;QAChB,OAAO;YACL,IAAI,EAAE,YAAY;SACnB,CAAC;IACJ,CAAC;IAmBY,KAAK,CAAC,KAAU;;YAC3B,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;YAEnB,KAAK,CAAC,SAAS,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,EAAE,IAAI,CAAC,MAAM,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC;YACxD,IAAI,CAAC,IAAI,GAAG,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;YACvC,IAAI,CAAC,IAAI,GAAG,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;YACvC,IAAI,CAAC,IAAI,GAAG,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;YAEvC,MAAM,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;YACtB,MAAM,EAAE,GAAQ,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;YAC7C,MAAM,UAAU,GAAQ,MAAM,EAAE,CAAC,OAAO,EAAE,CAAC;YAC3C,MAAM,WAAW,GAAQ,MAAM,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC;YACnD,MAAM,WAAW,GAAQ,UAAU,GAAG,CAAC,CAAC,CAAC,2BAA2B;YACpE,MAAM,aAAa,GAAQ,WAAW,GAAG,WAAW,CAAC,CAAC,oDAAoD;YAE1G,MAAM,IAAI,GAAQ,IAAI,CAAC;YACvB,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,KAAU,EAAE,EAAE;gBAC7B,IAAI,CAAC,OAAO,GAAG,CAAC,KAAK,GAAG,aAAa,CAAC,GAAG,WAAW,CAAC;gBACrD,IAAI,IAAI,CAAC,SAAS,EAAE;oBAClB,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;iBAC9B;YACH,CAAC,CAAC,CAAC;YAEH,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,KAAU,EAAE,EAAE;gBAC7B,IAAI,CAAC,OAAO,GAAG,CAAC,KAAK,GAAG,aAAa,CAAC,GAAG,WAAW,CAAC;gBACrD,IAAI,IAAI,CAAC,SAAS,EAAE;oBAClB,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;iBAC9B;YACH,CAAC,CAAC,CAAC;YAEH,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,KAAU,EAAE,EAAE;gBAC7B,IAAI,CAAC,OAAO,GAAG,CAAC,KAAK,GAAG,aAAa,CAAC,GAAG,WAAW,CAAC;gBACrD,IAAI,IAAI,CAAC,SAAS,EAAE;oBAClB,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;iBAC9B;YACH,CAAC,CAAC,CAAC;QACL,CAAC;KAAA;CACF;AA9DD,6BA8DC","file":"index.js","sourcesContent":["import Obniz from \"../../../obniz\";\r\nimport ObnizPartsInterface, {ObnizPartsInfo} from \"../../../obniz/ObnizPartsInterface\";\r\n\r\nexport interface KXSC7_2050Options { }\r\n\r\nexport default class KXSC7_2050 implements ObnizPartsInterface {\r\n\r\n  public static info(): ObnizPartsInfo {\r\n    return {\r\n      name: \"KXSC7-2050\",\r\n    };\r\n  }\r\n\r\n  public keys: string[];\r\n  public requiredKeys: string[];\r\n  public obniz!: Obniz;\r\n  public params: any;\r\n  public ad_x: any;\r\n  public ad_y: any;\r\n  public ad_z: any;\r\n  public gravity: any;\r\n  public onchangex: any;\r\n  public onchangey: any;\r\n  public onchangez: any;\r\n\r\n  constructor() {\r\n    this.keys = [\"x\", \"y\", \"z\", \"vcc\", \"gnd\"];\r\n    this.requiredKeys = [\"x\", \"y\", \"z\"];\r\n  }\r\n\r\n  public async wired(obniz: any) {\r\n    this.obniz = obniz;\r\n\r\n    obniz.setVccGnd(this.params.vcc, this.params.gnd, \"3v\");\r\n    this.ad_x = obniz.getAD(this.params.x);\r\n    this.ad_y = obniz.getAD(this.params.y);\r\n    this.ad_z = obniz.getAD(this.params.z);\r\n\r\n    await obniz.wait(500);\r\n    const ad: any = obniz.getAD(this.params.vcc);\r\n    const pwrVoltage: any = await ad.getWait();\r\n    const horizontalZ: any = await this.ad_z.getWait();\r\n    const sensitivity: any = pwrVoltage / 5; // Set sensitivity (unit:V)\r\n    const offsetVoltage: any = horizontalZ - sensitivity; // Set offset voltage (Output voltage at 0g, unit:V)\r\n\r\n    const self: any = this;\r\n    this.ad_x.start((value: any) => {\r\n      self.gravity = (value - offsetVoltage) / sensitivity;\r\n      if (self.onchangex) {\r\n        self.onchangex(self.gravity);\r\n      }\r\n    });\r\n\r\n    this.ad_y.start((value: any) => {\r\n      self.gravity = (value - offsetVoltage) / sensitivity;\r\n      if (self.onchangey) {\r\n        self.onchangey(self.gravity);\r\n      }\r\n    });\r\n\r\n    this.ad_z.start((value: any) => {\r\n      self.gravity = (value - offsetVoltage) / sensitivity;\r\n      if (self.onchangez) {\r\n        self.onchangez(self.gravity);\r\n      }\r\n    });\r\n  }\r\n}\r\n"]}