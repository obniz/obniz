{"version":3,"sources":["../src/parts/PressureSensor/DPS310/index.ts"],"names":[],"mappings":";;;;;;;;;;;AAOA,MAAqB,MAAM;IAwJzB;QA5IQ,iBAAY,GAAG;YACrB,yBAAyB,EAAE,IAAI;SAChC,CAAC;QAEM,mBAAc,GAAG,CAAC,CAAC;QACnB,gBAAW,GAAG,IAAI,CAAC;QACnB,uBAAkB,GAAG,CAAC,CAAC;QACvB,wBAAmB,GAAG,CAAC,CAAC;QACxB,wBAAmB,GAAG,CAAC,CAAC;QACxB,yBAAoB,GAAG,CAAC,CAAC;QAEzB,sBAAiB,GAAG,CAAC,CAAC;QACtB,yBAAoB,GAAG,CAAC,CAAC,CAAC;QAC1B,6BAAwB,GAAG,CAAC,CAAC,CAAC;QAC9B,yBAAoB,GAAG,CAAC,CAAC,CAAC;QAC1B,4BAAuB,GAAG,CAAC,CAAC,CAAC;QAC7B,UAAK,GAAG,CAAC,CAAC;QACV,WAAM,GAAG,CAAC,CAAC;QACX,WAAM,GAAG,CAAC,CAAC;QACX,YAAO,GAAG,CAAC,CAAC;QACZ,mBAAc,GAAG,CAAC,CAAC;QACnB,SAAI,GAAG;YACb,IAAI,EAAE,IAAI;YACV,OAAO,EAAE,IAAI;YACb,QAAQ,EAAE,IAAI;YACd,iBAAiB,EAAE,IAAI;YACvB,kBAAkB,EAAE,IAAI;YACxB,QAAQ,EAAE,IAAI;YACd,QAAQ,EAAE,IAAI;YACd,SAAS,EAAE,IAAI;SAChB,CAAC;QACM,cAAS,GAAG;YAClB,wBAAwB,EAAE;gBACxB,OAAO,EAAE,IAAI;gBACb,IAAI,EAAE,IAAI;gBACV,KAAK,EAAE,CAAC;aACT;YACD,uBAAuB,EAAE;gBACvB,OAAO,EAAE,IAAI;gBACb,IAAI,EAAE,IAAI;gBACV,KAAK,EAAE,CAAC;aACT;YACD,+BAA+B,EAAE;gBAC/B,OAAO,EAAE,IAAI;gBACb,IAAI,EAAE,IAAI;gBACV,KAAK,EAAE,CAAC;aACT;YACD,4BAA4B,EAAE;gBAC5B,OAAO,EAAE,IAAI;gBACb,IAAI,EAAE,IAAI;gBACV,KAAK,EAAE,CAAC;aACT;YACD,uBAAuB,EAAE;gBACvB,OAAO,EAAE,IAAI;gBACb,IAAI,EAAE,IAAI;gBACV,KAAK,EAAE,CAAC;aACT;YACD,wBAAwB,EAAE;gBACxB,OAAO,EAAE,IAAI;gBACb,IAAI,EAAE,IAAI;gBACV,KAAK,EAAE,CAAC;aACT;YACD,wBAAwB,EAAE;gBACxB,OAAO,EAAE,IAAI;gBACb,IAAI,EAAE,IAAI;gBACV,KAAK,EAAE,CAAC;aACT;YACD,wBAAwB,EAAE;gBACxB,OAAO,EAAE,IAAI;gBACb,IAAI,EAAE,IAAI;gBACV,KAAK,EAAE,CAAC;aACT;YACD,yBAAyB,EAAE;gBACzB,OAAO,EAAE,IAAI;gBACb,IAAI,EAAE,IAAI;gBACV,KAAK,EAAE,CAAC;aACT;YACD,uBAAuB,EAAE;gBACvB,OAAO,EAAE,IAAI;gBACb,IAAI,EAAE,IAAI;gBACV,KAAK,EAAE,CAAC;aACT;YACD,wBAAwB,EAAE;gBACxB,OAAO,EAAE,IAAI;gBACb,IAAI,EAAE,IAAI;gBACV,KAAK,EAAE,CAAC;aACT;YACD,uBAAuB,EAAE;gBACvB,OAAO,EAAE,IAAI;gBACb,IAAI,EAAE,IAAI;gBACV,KAAK,EAAE,CAAC;aACT;YACD,wBAAwB,EAAE;gBACxB,OAAO,EAAE,IAAI;gBACb,IAAI,EAAE,IAAI;gBACV,KAAK,EAAE,CAAC;aACT;YACD,wBAAwB,EAAE;gBACxB,OAAO,EAAE,IAAI;gBACb,IAAI,EAAE,IAAI;gBACV,KAAK,EAAE,CAAC;aACT;YACD,yBAAyB,EAAE;gBACzB,OAAO,EAAE,IAAI;gBACb,IAAI,EAAE,IAAI;gBACV,KAAK,EAAE,CAAC;aACT;SACF,CAAC;QAEM,cAAS,GAAG;YAClB,oBAAoB,EAAE;gBACpB,OAAO,EAAE,IAAI;gBACb,MAAM,EAAE,EAAE;aACX;YACD,mBAAmB,EAAE;gBACnB,OAAO,EAAE,IAAI;gBACb,MAAM,EAAE,CAAC;aACV;YACD,oBAAoB,EAAE;gBACpB,OAAO,EAAE,IAAI;gBACb,MAAM,EAAE,CAAC;aACV;SACF,CAAC;QACM,kBAAa,GAAG;YACtB,MAAM;YACN,OAAO;YACP,OAAO;YACP,OAAO;YACP,MAAM;YACN,MAAM;YACN,OAAO;YACP,OAAO;SACR,CAAC;QASA,IAAI,CAAC,YAAY,GAAG,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC;QACnC,IAAI,CAAC,IAAI,GAAG,CAAC,OAAO,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC;QAClD,IAAI,CAAC,MAAM,GAAG,CAAC,OAAO,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC;QAEpD,IAAI,CAAC,MAAM,GAAG,EAAE,CAAC;QAEjB,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC;IAC/B,CAAC;IA9JM,MAAM,CAAC,IAAI;QAChB,OAAO;YACL,IAAI,EAAE,QAAQ;YACd,SAAS,EAAE,EAAE;SACd,CAAC;IACJ,CAAC;IA2JM,KAAK,CAAC,KAAY;QACvB,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;QACnB,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;QACpB,IAAI,CAAC,MAAM,CAAC,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC;QAClC,IAAI,CAAC,MAAM,CAAC,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC;QAClC,IAAI,CAAC,MAAM,CAAC,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,IAAI,GAAG,GAAG,IAAI,CAAC;QACpD,IAAI,CAAC,MAAM,CAAC,IAAI,GAAG,QAAQ,CAAC;QAC5B,IAAI,CAAC,MAAM,CAAC,IAAI,GAAG,IAAI,CAAC;QACxB,IAAI,CAAC,GAAG,GAAG,KAAK,CAAC,gBAAgB,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QAC/C,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;IACtB,CAAC;IAEY,QAAQ;;YACnB,MAAM,MAAM,GAAQ,MAAM,IAAI,CAAC,oBAAoB,CACjD,IAAI,CAAC,SAAS,CAAC,wBAAwB,CACxC,CAAC;YACF,IAAI,MAAM,KAAK,CAAC,EAAE;gBAChB,MAAM,IAAI,KAAK,CAAC,gBAAgB,CAAC,CAAC;aACnC;YACD,MAAM,IAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC,SAAS,CAAC,uBAAuB,CAAC,CAAC;YAExE,MAAM,IAAI,CAAC,oBAAoB,CAC7B,IAAI,CAAC,SAAS,CAAC,+BAA+B,CAC/C,CAAC;YAEF,MAAM,IAAI,CAAC,iBAAiB,CAC1B,IAAI,CAAC,SAAS,CAAC,4BAA4B,EAC3C,CAAC,CACF,CAAC;YAEF,MAAM,IAAI,CAAC,cAAc,EAAE,CAAC;YAC5B,MAAM,IAAI,CAAC,WAAW,EAAE,CAAC;YACzB,MAAM,IAAI,CAAC,cAAc,CACvB,IAAI,CAAC,mBAAmB,EACxB,IAAI,CAAC,oBAAoB,CAC1B,CAAC;YACF,MAAM,IAAI,CAAC,kBAAkB,CAC3B,IAAI,CAAC,kBAAkB,EACvB,IAAI,CAAC,mBAAmB,CACzB,CAAC;YACF,MAAM,IAAI,CAAC,WAAW,EAAE,CAAC;YACzB,MAAM,IAAI,CAAC,mBAAmB,EAAE,CAAC;YACjC,MAAM,IAAI,CAAC,WAAW,EAAE,CAAC;YACzB,MAAM,IAAI,CAAC,eAAe,EAAE,CAAC;QAC/B,CAAC;KAAA;IAEY,uBAAuB,CAAC,gBAAqB;;YACxD,IAAI,gBAAgB,KAAK,SAAS,EAAE;gBAClC,gBAAgB,GAAG,IAAI,CAAC,MAAM,CAAC;aAChC;YACD,MAAM,IAAI,CAAC,4BAA4B,CAAC,gBAAgB,CAAC,CAAC;YAC1D,MAAM,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;YAC3B,MAAM,GAAG,GAAQ,MAAM,IAAI,CAAC,mBAAmB,EAAE,CAAC;YAClD,OAAO,GAAG,CAAC;QACb,CAAC;KAAA;IAEa,YAAY,CAAC,UAAe;;YACxC,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC,UAAU,CAAC,CAAC,CAAC;YAC3C,MAAM,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;YACzB,MAAM,OAAO,GAAa,MAAM,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC;YACnE,OAAO,OAAO,CAAC,CAAC,CAAC,CAAC;QACpB,CAAC;KAAA;IAEa,oBAAoB,CAAC,KAAU;;YAC3C,MAAM,UAAU,GAAQ,KAAK,CAAC,OAAO,CAAC;YACtC,MAAM,IAAI,GAAQ,KAAK,CAAC,IAAI,CAAC;YAC7B,MAAM,KAAK,GAAQ,KAAK,CAAC,KAAK,CAAC;YAC/B,IAAI,GAAG,GAAW,MAAM,IAAI,CAAC,YAAY,CAAC,UAAU,CAAC,CAAC;YACtD,IAAI,GAAG,GAAG,CAAC,EAAE;gBACX,OAAO,GAAG,CAAC;aACZ;YACD,IAAI,IAAI,KAAK,SAAS,EAAE;gBACtB,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC;aAClB;YACD,IAAI,KAAK,KAAK,SAAS,EAAE;gBACvB,GAAG,GAAG,GAAG,IAAI,KAAK,CAAC;aACpB;YACD,OAAO,GAAG,CAAC;QACb,CAAC;KAAA;IAEa,aAAa,CAAC,SAAc;;YACxC,MAAM,OAAO,GAAQ,SAAS,CAAC,OAAO,CAAC;YACvC,MAAM,MAAM,GAAQ,SAAS,CAAC,MAAM,CAAC;YACrC,MAAM,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;YACzB,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC;YACxC,MAAM,OAAO,GAAa,MAAM,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,EAAE,MAAM,CAAC,CAAC;YACxE,OAAO,OAAO,CAAC;QACjB,CAAC;KAAA;IAEa,aAAa,CAAC,UAAe,EAAE,IAAS,EAAE,KAAW;;YACjE,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC,CAAC;YACjD,IAAI,KAAK,EAAE;gBACT,IAAI,CAAC,MAAM,IAAI,CAAC,YAAY,CAAC,UAAU,CAAC,CAAC,KAAK,IAAI,EAAE;oBAClD,MAAM,IAAI,KAAK,CAAC,0BAA0B,CAAC,CAAC;iBAC7C;aACF;QACH,CAAC;KAAA;IAEa,iBAAiB,CAAC,KAAU,EAAE,IAAS,EAAE,KAAW;;YAChE,MAAM,GAAG,GAAQ,MAAM,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC;YACxD,MAAM,QAAQ,GAAQ,CAAC,GAAG,GAAG,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,IAAI,IAAI,KAAK,CAAC,KAAK,CAAC,GAAG,KAAK,CAAC,IAAI,CAAC,CAAC;YAEjF,MAAM,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,OAAO,EAAE,QAAQ,EAAE,KAAK,CAAC,CAAC;QAC3D,CAAC;KAAA;IAEa,mBAAmB,CAAC,UAAe,EAAE,WAAgB,EAAE,QAAa;;YAChF,MAAM,MAAM,GACV,CAAC,CAAC,UAAU,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;gBACtC,CAAC,CAAC,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;gBACvC,CAAC,QAAQ,GAAG,IAAI,CAAC,WAAW,CAAC,CAAC;YAChC,OAAO,MAAM,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;QAC1C,CAAC;KAAA;IAEa,aAAa,CAAC,MAAW;;YACrC,MAAM;gBACJ,IAAI,CAAC,SAAS,CAAC,uBAAuB,CAAC,IAAI;oBAC3C,IAAI,CAAC,SAAS,CAAC,uBAAuB,CAAC,KAAK,CAAC;YAE/C,MAAM,IAAI,CAAC,aAAa,CACtB,IAAI,CAAC,SAAS,CAAC,uBAAuB,CAAC,OAAO,EAC9C,MAAM,CACP,CAAC;YACF,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;QACvB,CAAC;KAAA;IAEa,WAAW;;YACvB,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YACnC,MAAM,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,SAAS,CAAC,wBAAwB,EAAE,CAAC,CAAC,CAAC;YACzE,MAAM,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,SAAS,CAAC,wBAAwB,EAAE,CAAC,CAAC,CAAC;QAC3E,CAAC;KAAA;IAEa,cAAc,CAAC,MAAW,EAAE,OAAY;;YACpD,MAAM,IAAI,CAAC,iBAAiB,CAC1B,IAAI,CAAC,SAAS,CAAC,wBAAwB,EACvC,MAAM,CACP,CAAC;YACF,MAAM,IAAI,CAAC,iBAAiB,CAC1B,IAAI,CAAC,SAAS,CAAC,yBAAyB,EACxC,OAAO,CACR,CAAC;YAEF,IAAI,OAAO,GAAG,IAAI,CAAC,cAAc,EAAE;gBACjC,MAAM,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,SAAS,CAAC,wBAAwB,EAAE,CAAC,CAAC,CAAC;aAC1E;iBAAM;gBACL,MAAM,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,SAAS,CAAC,wBAAwB,EAAE,CAAC,CAAC,CAAC;aAC1E;YAED,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;YACrB,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;QACzB,CAAC;KAAA;IAEa,kBAAkB,CAAC,KAAU,EAAE,MAAW;;YACtD,MAAM,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,SAAS,CAAC,uBAAuB,EAAE,KAAK,CAAC,CAAC;YAC5E,MAAM,IAAI,CAAC,iBAAiB,CAC1B,IAAI,CAAC,SAAS,CAAC,wBAAwB,EACvC,MAAM,CACP,CAAC;YAEF,IAAI,MAAM,GAAG,IAAI,CAAC,cAAc,EAAE;gBAChC,MAAM,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,SAAS,CAAC,uBAAuB,EAAE,CAAC,CAAC,CAAC;aACzE;iBAAM;gBACL,MAAM,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,SAAS,CAAC,uBAAuB,EAAE,CAAC,CAAC,CAAC;aACzE;YACD,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;YACnB,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;QACvB,CAAC;KAAA;IAEa,cAAc;;YAC1B,MAAM,MAAM,GAAQ,MAAM,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,SAAS,CAAC,oBAAoB,CAAC,CAAC;YAElF,IAAI,CAAC,MAAM,CAAC,QAAQ,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC;YACpE,IAAI,IAAI,CAAC,MAAM,CAAC,QAAQ,GAAG,CAAC,CAAC,IAAI,EAAE,CAAC,EAAE;gBACpC,IAAI,CAAC,MAAM,CAAC,QAAQ,IAAI,CAAC,IAAI,EAAE,CAAC;aACjC;YACD,IAAI,CAAC,MAAM,CAAC,QAAQ,GAAG,IAAI,CAAC,MAAM,CAAC,QAAQ,GAAG,CAAC,CAAC;YAEhD,IAAI,CAAC,MAAM,CAAC,IAAI,GAAG,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC;YACzD,IAAI,IAAI,CAAC,MAAM,CAAC,IAAI,GAAG,CAAC,CAAC,IAAI,EAAE,CAAC,EAAE;gBAChC,IAAI,CAAC,MAAM,CAAC,IAAI,IAAI,CAAC,IAAI,EAAE,CAAC;aAC7B;YACD,IAAI,CAAC,MAAM,CAAC,KAAK;gBACf,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC;YACnE,IAAI,IAAI,CAAC,MAAM,CAAC,KAAK,GAAG,CAAC,CAAC,IAAI,EAAE,CAAC,EAAE;gBACjC,IAAI,CAAC,MAAM,CAAC,KAAK,IAAI,CAAC,IAAI,EAAE,CAAC;aAC9B;YAED,IAAI,CAAC,MAAM,CAAC,KAAK;gBACf,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,IAAI,EAAE,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC;YAC5D,IAAI,IAAI,CAAC,MAAM,CAAC,KAAK,GAAG,CAAC,CAAC,IAAI,EAAE,CAAC,EAAE;gBACjC,IAAI,CAAC,MAAM,CAAC,KAAK,IAAI,CAAC,IAAI,EAAE,CAAC;aAC9B;YAED,IAAI,CAAC,MAAM,CAAC,KAAK,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC;YACjD,IAAI,IAAI,CAAC,MAAM,CAAC,KAAK,GAAG,CAAC,CAAC,IAAI,EAAE,CAAC,EAAE;gBACjC,IAAI,CAAC,MAAM,CAAC,KAAK,IAAI,CAAC,IAAI,EAAE,CAAC;aAC9B;YAED,IAAI,CAAC,MAAM,CAAC,KAAK,GAAG,CAAC,MAAM,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,GAAG,MAAM,CAAC,EAAE,CAAC,CAAC;YACnD,IAAI,IAAI,CAAC,MAAM,CAAC,KAAK,GAAG,CAAC,CAAC,IAAI,EAAE,CAAC,EAAE;gBACjC,IAAI,CAAC,MAAM,CAAC,KAAK,IAAI,CAAC,IAAI,EAAE,CAAC;aAC9B;YAED,IAAI,CAAC,MAAM,CAAC,KAAK,GAAG,CAAC,MAAM,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,GAAG,MAAM,CAAC,EAAE,CAAC,CAAC;YACnD,IAAI,IAAI,CAAC,MAAM,CAAC,KAAK,GAAG,CAAC,CAAC,IAAI,EAAE,CAAC,EAAE;gBACjC,IAAI,CAAC,MAAM,CAAC,KAAK,IAAI,CAAC,IAAI,EAAE,CAAC;aAC9B;YAED,IAAI,CAAC,MAAM,CAAC,KAAK,GAAG,CAAC,MAAM,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,GAAG,MAAM,CAAC,EAAE,CAAC,CAAC;YACnD,IAAI,IAAI,CAAC,MAAM,CAAC,KAAK,GAAG,CAAC,CAAC,IAAI,EAAE,CAAC,EAAE;gBACjC,IAAI,CAAC,MAAM,CAAC,KAAK,IAAI,CAAC,IAAI,EAAE,CAAC;aAC9B;YAED,IAAI,CAAC,MAAM,CAAC,KAAK,GAAG,CAAC,MAAM,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,GAAG,MAAM,CAAC,EAAE,CAAC,CAAC;YACnD,IAAI,IAAI,CAAC,MAAM,CAAC,KAAK,GAAG,CAAC,CAAC,IAAI,EAAE,CAAC,EAAE;gBACjC,IAAI,CAAC,MAAM,CAAC,KAAK,IAAI,CAAC,IAAI,EAAE,CAAC;aAC9B;QACH,CAAC;KAAA;IAEa,mBAAmB;;YAC/B,IAAI,GAAQ,CAAC;YACb,QAAQ,IAAI,CAAC,MAAM,EAAE;gBACnB,KAAK,IAAI,CAAC,IAAI,CAAC,QAAQ;oBACrB,GAAG,GAAG,MAAM,IAAI,CAAC,oBAAoB,CACnC,IAAI,CAAC,SAAS,CAAC,yBAAyB,CACzC,CAAC;oBACF,MAAM;gBACR,KAAK,IAAI,CAAC,IAAI,CAAC,OAAO;oBACpB,GAAG,GAAG,MAAM,IAAI,CAAC,oBAAoB,CACnC,IAAI,CAAC,SAAS,CAAC,wBAAwB,CACxC,CAAC;oBACF,MAAM;gBACR;oBACE,OAAO,IAAI,CAAC,oBAAoB,CAAC;aACpC;YAED,IAAI,OAAY,CAAC;YACjB,QAAQ,GAAG,EAAE;gBACX,KAAK,IAAI,CAAC,oBAAoB;oBAC5B,MAAM,IAAI,KAAK,CAAC,sBAAsB,CAAC,CAAC;gBAC1C,KAAK,CAAC;oBACJ,OAAO,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE;wBACnC,OAAO,IAAI,CAAC,mBAAmB,EAAE,CAAC;oBACpC,CAAC,CAAC,CAAC;gBACL,KAAK,CAAC;oBACJ,OAAO,GAAG,IAAI,CAAC,MAAM,CAAC;oBACtB,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC;oBAC7B,QAAQ,OAAO,EAAE;wBACf,KAAK,IAAI,CAAC,IAAI,CAAC,QAAQ;4BACrB,OAAO,MAAM,IAAI,CAAC,WAAW,EAAE,CAAC;wBAClC,KAAK,IAAI,CAAC,IAAI,CAAC,OAAO;4BACpB,OAAO,MAAM,IAAI,CAAC,eAAe,EAAE,CAAC;wBACtC;4BACE,MAAM,IAAI,KAAK,CAAC,sBAAsB,CAAC,CAAC;qBAC3C;aACJ;YACD,MAAM,IAAI,KAAK,CAAC,sBAAsB,CAAC,CAAC;QAC1C,CAAC;KAAA;IAEa,wBAAwB,CAAC,gBAAqB;;YAC1D,MAAM,IAAI,CAAC,cAAc,CAAC,CAAC,EAAE,gBAAgB,CAAC,CAAC;YAC/C,MAAM,IAAI,CAAC,mBAAmB,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAC1C,CAAC;KAAA;IAEa,4BAA4B,CAAC,gBAAqB;;YAC9D,MAAM,IAAI,CAAC,kBAAkB,CAAC,CAAC,EAAE,gBAAgB,CAAC,CAAC;YACnD,MAAM,IAAI,CAAC,mBAAmB,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAC1C,CAAC;KAAA;IAEO,YAAY,CAAC,GAAQ;QAC3B,IAAI,GAAG,GAAQ,GAAG,CAAC;QACnB,GAAG,IAAI,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QACvC,GAAG;YACD,IAAI,CAAC,MAAM,CAAC,KAAK;gBACjB,GAAG;oBACH,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK;wBAChB,GAAG,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,GAAG,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;gBACtD,IAAI,CAAC,cAAc;oBACnB,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK;wBAChB,GAAG,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,GAAG,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC;QACzD,OAAO,GAAG,CAAC;IACb,CAAC;IAEO,QAAQ,CAAC,GAAQ;QACvB,IAAI,IAAI,GAAQ,GAAG,CAAC;QACpB,IAAI,IAAI,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QACzC,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;QAC3B,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,QAAQ,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,GAAG,IAAI,CAAC;QACtD,OAAO,IAAI,CAAC;IACd,CAAC;IAEa,eAAe;;YAC3B,IAAI,CAAC,aAAa,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;YAC/B,IAAI,CAAC,aAAa,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;YAC/B,IAAI,CAAC,aAAa,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;YAC/B,IAAI,CAAC,aAAa,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;YAC/B,IAAI,CAAC,aAAa,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;YAE/B,MAAM,IAAI,CAAC,mBAAmB,EAAE,CAAC;QACnC,CAAC;KAAA;IAEa,mBAAmB,CAAC,gBAAsB;;YACtD,IAAI,gBAAgB,KAAK,SAAS,EAAE;gBAClC,gBAAgB,GAAG,IAAI,CAAC,OAAO,CAAC;aACjC;YACD,MAAM,IAAI,CAAC,wBAAwB,CAAC,gBAAgB,CAAC,CAAC;YACtD,MAAM,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;YAC3B,OAAO,MAAM,IAAI,CAAC,mBAAmB,EAAE,CAAC;QAC1C,CAAC;KAAA;IAEa,WAAW;;YACvB,MAAM,IAAI,GAAQ,MAAM,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,SAAS,CAAC,oBAAoB,CAAC,CAAC;YAEhF,IAAI,IAAI,GAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC;YAC3D,IAAI,IAAI,GAAG,CAAC,CAAC,IAAI,EAAE,CAAC,EAAE;gBACpB,IAAI,IAAI,CAAC,IAAI,EAAE,CAAC;aACjB;YACD,OAAO,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;QAC7B,CAAC;KAAA;IAEa,eAAe;;YAC3B,MAAM,IAAI,GAAQ,MAAM,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,SAAS,CAAC,mBAAmB,CAAC,CAAC;YAC/E,IAAI,GAAG,GAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC;YAC1D,IAAI,GAAG,GAAG,CAAC,CAAC,IAAI,EAAE,CAAC,EAAE;gBACnB,GAAG,IAAI,CAAC,IAAI,EAAE,CAAC;aAChB;YACD,OAAO,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC;QAChC,CAAC;KAAA;CACF;AAzeD,yBAyeC","file":"index.js","sourcesContent":["import Obniz from \"../../../obniz\";\r\nimport PeripheralI2C from \"../../../obniz/libs/io_peripherals/i2c\";\r\nimport ObnizPartsInterface, {ObnizPartsInfo} from \"../../../obniz/ObnizPartsInterface\";\r\n\r\nexport interface DPS310Options {\r\n}\r\n\r\nexport default class DPS310 implements ObnizPartsInterface {\r\n\r\n  public static info(): ObnizPartsInfo {\r\n    return {\r\n      name: \"DPS310\",\r\n      datasheet: \"\",\r\n    };\r\n  }\r\n\r\n  public requiredKeys: string[];\r\n  public keys: string[];\r\n  public ioKeys: string[];\r\n  private configration = {\r\n    DPS310__STD_SLAVE_ADDRESS: 0x77,\r\n  };\r\n\r\n  private DPS310__OSR_SE = 3;\r\n  private DPS310__LSB = 0x01;\r\n  private DPS310__PRS_STD_MR = 2;\r\n  private DPS310__PRS_STD_OSR = 3;\r\n  private DPS310__TEMP_STD_MR = 2;\r\n  private DPS310__TEMP_STD_OSR = 3;\r\n\r\n  private DPS310__SUCCEEDED = 0;\r\n  private DPS310__FAIL_UNKNOWN = -1;\r\n  private DPS310__FAIL_INIT_FAILED = -2;\r\n  private DPS310__FAIL_TOOBUSY = -3;\r\n  private DPS310__FAIL_UNFINISHED = -4;\r\n  private prsMr = 0;\r\n  private prsOsr = 0;\r\n  private tempMr = 0;\r\n  private tempOsr = 0;\r\n  private m_lastTempScal = 0;\r\n  private mode = {\r\n    IDLE: 0x00,\r\n    CMD_PRS: 0x01,\r\n    CMD_TEMP: 0x02,\r\n    INVAL_OP_CMD_BOTH: 0x03, // invalid\r\n    INVAL_OP_CONT_NONE: 0x04, // invalid\r\n    CONT_PRS: 0x05,\r\n    CONT_TMP: 0x06,\r\n    CONT_BOTH: 0x07,\r\n  };\r\n  private bitFileds = {\r\n    DPS310__REG_INFO_PROD_ID: {\r\n      address: 0x0d,\r\n      mask: 0x0f,\r\n      shift: 0,\r\n    },\r\n    DPS310__REG_INFO_REV_ID: {\r\n      address: 0x0d,\r\n      mask: 0xf0,\r\n      shift: 4,\r\n    },\r\n    DPS310__REG_INFO_TEMP_SENSORREC: {\r\n      address: 0x28,\r\n      mask: 0x80,\r\n      shift: 7,\r\n    },\r\n    DPS310__REG_INFO_TEMP_SENSOR: {\r\n      address: 0x07,\r\n      mask: 0x80,\r\n      shift: 7,\r\n    },\r\n    DPS310__REG_INFO_OPMODE: {\r\n      address: 0x08,\r\n      mask: 0x07,\r\n      shift: 0,\r\n    },\r\n    DPS310__REG_INFO_FIFO_FL: {\r\n      address: 0x0c,\r\n      mask: 0x80,\r\n      shift: 7,\r\n    },\r\n    DPS310__REG_INFO_FIFO_EN: {\r\n      address: 0x09,\r\n      mask: 0x02,\r\n      shift: 1,\r\n    },\r\n    DPS310__REG_INFO_TEMP_MR: {\r\n      address: 0x07,\r\n      mask: 0x70,\r\n      shift: 4,\r\n    },\r\n    DPS310__REG_INFO_TEMP_OSR: {\r\n      address: 0x07,\r\n      mask: 0x07,\r\n      shift: 0,\r\n    },\r\n    DPS310__REG_INFO_PRS_MR: {\r\n      address: 0x06,\r\n      mask: 0x70,\r\n      shift: 4,\r\n    },\r\n    DPS310__REG_INFO_PRS_OSR: {\r\n      address: 0x06,\r\n      mask: 0x07,\r\n      shift: 0,\r\n    },\r\n    DPS310__REG_INFO_PRS_SE: {\r\n      address: 0x09,\r\n      mask: 0x04,\r\n      shift: 2,\r\n    },\r\n    DPS310__REG_INFO_PRS_RDY: {\r\n      address: 0x08,\r\n      mask: 0x10,\r\n      shift: 4,\r\n    },\r\n    DPS310__REG_INFO_TEMP_SE: {\r\n      address: 0x09,\r\n      mask: 0x08,\r\n      shift: 3,\r\n    },\r\n    DPS310__REG_INFO_TEMP_RDY: {\r\n      address: 0x08,\r\n      mask: 0x20,\r\n      shift: 5,\r\n    },\r\n  };\r\n\r\n  private dataBlock = {\r\n    DPS310__REG_ADR_COEF: {\r\n      address: 0x10,\r\n      length: 18,\r\n    },\r\n    DPS310__REG_ADR_PRS: {\r\n      address: 0x00,\r\n      length: 3,\r\n    },\r\n    DPS310__REG_ADR_TEMP: {\r\n      address: 0x03,\r\n      length: 3,\r\n    },\r\n  };\r\n  private scaling_facts = [\r\n    524288,\r\n    1572864,\r\n    3670016,\r\n    7864320,\r\n    253952,\r\n    516096,\r\n    1040384,\r\n    2088960,\r\n  ];\r\n  private opMode: any;\r\n  private coeffs: any;\r\n  private obniz!: Obniz;\r\n  private address: any;\r\n  private params: any;\r\n  private i2c!: PeripheralI2C;\r\n\r\n  constructor() {\r\n    this.requiredKeys = [\"sda\", \"scl\"];\r\n    this.keys = [\"gpio3\", \"vcc\", \"gnd\", \"scl\", \"sda\"];\r\n    this.ioKeys = [\"gpio3\", \"vcc\", \"gnd\", \"scl\", \"sda\"];\r\n\r\n    this.coeffs = {};\r\n\r\n    this.opMode = this.mode.IDLE;\r\n  }\r\n\r\n  public wired(obniz: Obniz) {\r\n    this.obniz = obniz;\r\n    this.address = 0x77;\r\n    this.params.sda = this.params.sda;\r\n    this.params.scl = this.params.scl;\r\n    this.params.clock = this.params.clock || 100 * 1000;\r\n    this.params.mode = \"master\";\r\n    this.params.pull = \"3v\";\r\n    this.i2c = obniz.getI2CWithConfig(this.params);\r\n    this.obniz.wait(10);\r\n  }\r\n\r\n  public async initWait(): Promise<void> {\r\n    const prodId: any = await this.readByteBitfieldWait(\r\n      this.bitFileds.DPS310__REG_INFO_PROD_ID,\r\n    );\r\n    if (prodId !== 0) {\r\n      throw new Error(\"invalid prodId\");\r\n    }\r\n    await this.readByteBitfieldWait(this.bitFileds.DPS310__REG_INFO_REV_ID);\r\n\r\n    await this.readByteBitfieldWait(\r\n      this.bitFileds.DPS310__REG_INFO_TEMP_SENSORREC,\r\n    );\r\n\r\n    await this.writeByteBitfield(\r\n      this.bitFileds.DPS310__REG_INFO_TEMP_SENSOR,\r\n      0,\r\n    );\r\n\r\n    await this.readCoeffsWait();\r\n    await this.standbyWait();\r\n    await this.configTempWait(\r\n      this.DPS310__TEMP_STD_MR,\r\n      this.DPS310__TEMP_STD_OSR,\r\n    );\r\n    await this.configPressureWait(\r\n      this.DPS310__PRS_STD_MR,\r\n      this.DPS310__PRS_STD_OSR,\r\n    );\r\n    await this.standbyWait();\r\n    await this.measureTempOnceWait();\r\n    await this.standbyWait();\r\n    await this.correctTempWait();\r\n  }\r\n\r\n  public async measurePressureOnceWait(oversamplingRate: any) {\r\n    if (oversamplingRate === undefined) {\r\n      oversamplingRate = this.prsOsr;\r\n    }\r\n    await this.startMeasurePressureOnceWait(oversamplingRate);\r\n    await this.obniz.wait(100);\r\n    const ret: any = await this.getSingleResultWait();\r\n    return ret;\r\n  }\r\n\r\n  private async readByteWait(regAddress: any): Promise<number> {\r\n    this.i2c.write(this.address, [regAddress]);\r\n    await this.obniz.wait(1);\r\n    const results: number[] = await this.i2c.readWait(this.address, 1);\r\n    return results[0];\r\n  }\r\n\r\n  private async readByteBitfieldWait(field: any): Promise<number> {\r\n    const regAddress: any = field.address;\r\n    const mask: any = field.mask;\r\n    const shift: any = field.shift;\r\n    let ret: number = await this.readByteWait(regAddress);\r\n    if (ret < 0) {\r\n      return ret;\r\n    }\r\n    if (mask !== undefined) {\r\n      ret = ret & mask;\r\n    }\r\n    if (shift !== undefined) {\r\n      ret = ret >> shift;\r\n    }\r\n    return ret;\r\n  }\r\n\r\n  private async readBlockWait(datablock: any): Promise<number[]> {\r\n    const address: any = datablock.address;\r\n    const length: any = datablock.length;\r\n    await this.obniz.wait(1);\r\n    this.i2c.write(this.address, [address]);\r\n    const results: number[] = await this.i2c.readWait(this.address, length);\r\n    return results;\r\n  }\r\n\r\n  private async writeByteWait(regAddress: any, data: any, check?: any): Promise<void> {\r\n    this.i2c.write(this.address, [regAddress, data]);\r\n    if (check) {\r\n      if ((await this.readByteWait(regAddress)) !== data) {\r\n        throw new Error(\"DPS310 data write failed\");\r\n      }\r\n    }\r\n  }\r\n\r\n  private async writeByteBitfield(field: any, data: any, check?: any): Promise<void> {\r\n    const old: any = await this.readByteWait(field.address);\r\n    const sendData: any = (old & ~field.mask) | ((data << field.shift) & field.mask);\r\n\r\n    await this.writeByteWait(field.address, sendData, check);\r\n  }\r\n\r\n  private async setOpModeDetailWait(background: any, temperature: any, pressure: any): Promise<void> {\r\n    const opMode: any =\r\n      ((background & this.DPS310__LSB) << 2) |\r\n      ((temperature & this.DPS310__LSB) << 1) |\r\n      (pressure & this.DPS310__LSB);\r\n    return await this.setOpModeWait(opMode);\r\n  }\r\n\r\n  private async setOpModeWait(opMode: any): Promise<void> {\r\n    opMode &=\r\n      this.bitFileds.DPS310__REG_INFO_OPMODE.mask >>\r\n      this.bitFileds.DPS310__REG_INFO_OPMODE.shift;\r\n\r\n    await this.writeByteWait(\r\n      this.bitFileds.DPS310__REG_INFO_OPMODE.address,\r\n      opMode,\r\n    );\r\n    this.opMode = opMode;\r\n  }\r\n\r\n  private async standbyWait(): Promise<void> {\r\n    this.setOpModeWait(this.mode.IDLE);\r\n    await this.writeByteBitfield(this.bitFileds.DPS310__REG_INFO_FIFO_FL, 1);\r\n    await this.writeByteBitfield(this.bitFileds.DPS310__REG_INFO_FIFO_EN, 0);\r\n  }\r\n\r\n  private async configTempWait(tempMr: any, tempOsr: any): Promise<void> {\r\n    await this.writeByteBitfield(\r\n      this.bitFileds.DPS310__REG_INFO_TEMP_MR,\r\n      tempMr,\r\n    );\r\n    await this.writeByteBitfield(\r\n      this.bitFileds.DPS310__REG_INFO_TEMP_OSR,\r\n      tempOsr,\r\n    );\r\n\r\n    if (tempOsr > this.DPS310__OSR_SE) {\r\n      await this.writeByteBitfield(this.bitFileds.DPS310__REG_INFO_TEMP_SE, 1);\r\n    } else {\r\n      await this.writeByteBitfield(this.bitFileds.DPS310__REG_INFO_TEMP_SE, 0);\r\n    }\r\n\r\n    this.tempMr = tempMr;\r\n    this.tempOsr = tempOsr;\r\n  }\r\n\r\n  private async configPressureWait(prsMr: any, prsOsr: any): Promise<void> {\r\n    await this.writeByteBitfield(this.bitFileds.DPS310__REG_INFO_PRS_MR, prsMr);\r\n    await this.writeByteBitfield(\r\n      this.bitFileds.DPS310__REG_INFO_PRS_OSR,\r\n      prsOsr,\r\n    );\r\n\r\n    if (prsOsr > this.DPS310__OSR_SE) {\r\n      await this.writeByteBitfield(this.bitFileds.DPS310__REG_INFO_PRS_SE, 1);\r\n    } else {\r\n      await this.writeByteBitfield(this.bitFileds.DPS310__REG_INFO_PRS_SE, 0);\r\n    }\r\n    this.prsMr = prsMr;\r\n    this.prsOsr = prsOsr;\r\n  }\r\n\r\n  private async readCoeffsWait(): Promise<void> {\r\n    const buffer: any = await this.readBlockWait(this.dataBlock.DPS310__REG_ADR_COEF);\r\n\r\n    this.coeffs.m_c0Half = (buffer[0] << 4) | ((buffer[1] >> 4) & 0x0f);\r\n    if (this.coeffs.m_c0Half & (1 << 11)) {\r\n      this.coeffs.m_c0Half -= 1 << 12;\r\n    }\r\n    this.coeffs.m_c0Half = this.coeffs.m_c0Half / 2;\r\n\r\n    this.coeffs.m_c1 = ((buffer[1] & 0x0f) << 8) | buffer[2];\r\n    if (this.coeffs.m_c1 & (1 << 11)) {\r\n      this.coeffs.m_c1 -= 1 << 12;\r\n    }\r\n    this.coeffs.m_c00 =\r\n      (buffer[3] << 12) | (buffer[4] << 4) | ((buffer[5] >> 4) & 0x0f);\r\n    if (this.coeffs.m_c00 & (1 << 19)) {\r\n      this.coeffs.m_c00 -= 1 << 20;\r\n    }\r\n\r\n    this.coeffs.m_c10 =\r\n      ((buffer[5] & 0x0f) << 16) | (buffer[6] << 8) | buffer[7];\r\n    if (this.coeffs.m_c10 & (1 << 19)) {\r\n      this.coeffs.m_c10 -= 1 << 20;\r\n    }\r\n\r\n    this.coeffs.m_c01 = (buffer[8] << 8) | buffer[9];\r\n    if (this.coeffs.m_c01 & (1 << 15)) {\r\n      this.coeffs.m_c01 -= 1 << 16;\r\n    }\r\n\r\n    this.coeffs.m_c11 = (buffer[10] << 8) | buffer[11];\r\n    if (this.coeffs.m_c11 & (1 << 15)) {\r\n      this.coeffs.m_c11 -= 1 << 16;\r\n    }\r\n\r\n    this.coeffs.m_c20 = (buffer[12] << 8) | buffer[13];\r\n    if (this.coeffs.m_c20 & (1 << 15)) {\r\n      this.coeffs.m_c20 -= 1 << 16;\r\n    }\r\n\r\n    this.coeffs.m_c21 = (buffer[14] << 8) | buffer[15];\r\n    if (this.coeffs.m_c21 & (1 << 15)) {\r\n      this.coeffs.m_c21 -= 1 << 16;\r\n    }\r\n\r\n    this.coeffs.m_c30 = (buffer[16] << 8) | buffer[17];\r\n    if (this.coeffs.m_c30 & (1 << 15)) {\r\n      this.coeffs.m_c30 -= 1 << 16;\r\n    }\r\n  }\r\n\r\n  private async getSingleResultWait(): Promise<number> {\r\n    let rdy: any;\r\n    switch (this.opMode) {\r\n      case this.mode.CMD_TEMP:\r\n        rdy = await this.readByteBitfieldWait(\r\n          this.bitFileds.DPS310__REG_INFO_TEMP_RDY,\r\n        );\r\n        break;\r\n      case this.mode.CMD_PRS:\r\n        rdy = await this.readByteBitfieldWait(\r\n          this.bitFileds.DPS310__REG_INFO_PRS_RDY,\r\n        );\r\n        break;\r\n      default:\r\n        return this.DPS310__FAIL_TOOBUSY;\r\n    }\r\n\r\n    let oldMode: any;\r\n    switch (rdy) {\r\n      case this.DPS310__FAIL_UNKNOWN:\r\n        throw new Error(\"DPS310__FAIL_UNKNOWN\");\r\n      case 0:\r\n        return this.obniz.wait(10).then(() => {\r\n          return this.getSingleResultWait();\r\n        });\r\n      case 1:\r\n        oldMode = this.opMode;\r\n        this.opMode = this.mode.IDLE;\r\n        switch (oldMode) {\r\n          case this.mode.CMD_TEMP:\r\n            return await this.getTempWait();\r\n          case this.mode.CMD_PRS:\r\n            return await this.getPressureWait();\r\n          default:\r\n            throw new Error(\"DPS310__FAIL_UNKNOWN\");\r\n        }\r\n    }\r\n    throw new Error(\"DPS310__FAIL_UNKNOWN\");\r\n  }\r\n\r\n  private async startMeasureTempOnceWait(oversamplingRate: any): Promise<void> {\r\n    await this.configTempWait(0, oversamplingRate);\r\n    await this.setOpModeDetailWait(0, 1, 0);\r\n  }\r\n\r\n  private async startMeasurePressureOnceWait(oversamplingRate: any): Promise<void> {\r\n    await this.configPressureWait(0, oversamplingRate);\r\n    await this.setOpModeDetailWait(0, 0, 1);\r\n  }\r\n\r\n  private calcPressure(raw: any): number {\r\n    let prs: any = raw;\r\n    prs /= this.scaling_facts[this.prsOsr];\r\n    prs =\r\n      this.coeffs.m_c00 +\r\n      prs *\r\n      (this.coeffs.m_c10 +\r\n        prs * (this.coeffs.m_c20 + prs * this.coeffs.m_c30)) +\r\n      this.m_lastTempScal *\r\n      (this.coeffs.m_c01 +\r\n        prs * (this.coeffs.m_c11 + prs * this.coeffs.m_c21));\r\n    return prs;\r\n  }\r\n\r\n  private calcTemp(raw: any): number {\r\n    let temp: any = raw;\r\n    temp /= this.scaling_facts[this.tempOsr];\r\n    this.m_lastTempScal = temp;\r\n    temp = this.coeffs.m_c0Half + this.coeffs.m_c1 * temp;\r\n    return temp;\r\n  }\r\n\r\n  private async correctTempWait(): Promise<void> {\r\n    this.writeByteWait(0x0e, 0xe5);\r\n    this.writeByteWait(0x0f, 0x96);\r\n    this.writeByteWait(0x62, 0x02);\r\n    this.writeByteWait(0x0e, 0x00);\r\n    this.writeByteWait(0x0f, 0x00);\r\n\r\n    await this.measureTempOnceWait();\r\n  }\r\n\r\n  private async measureTempOnceWait(oversamplingRate?: any): Promise<number> {\r\n    if (oversamplingRate === undefined) {\r\n      oversamplingRate = this.tempOsr;\r\n    }\r\n    await this.startMeasureTempOnceWait(oversamplingRate);\r\n    await this.obniz.wait(100);\r\n    return await this.getSingleResultWait();\r\n  }\r\n\r\n  private async getTempWait(): Promise<number> {\r\n    const data: any = await this.readBlockWait(this.dataBlock.DPS310__REG_ADR_TEMP);\r\n\r\n    let temp: any = (data[0] << 16) | (data[1] << 8) | data[2];\r\n    if (temp & (1 << 23)) {\r\n      temp -= 1 << 24;\r\n    }\r\n    return this.calcTemp(temp);\r\n  }\r\n\r\n  private async getPressureWait(): Promise<number> {\r\n    const data: any = await this.readBlockWait(this.dataBlock.DPS310__REG_ADR_PRS);\r\n    let prs: any = (data[0] << 16) | (data[1] << 8) | data[2];\r\n    if (prs & (1 << 23)) {\r\n      prs -= 1 << 24;\r\n    }\r\n    return this.calcPressure(prs);\r\n  }\r\n}\r\n"]}